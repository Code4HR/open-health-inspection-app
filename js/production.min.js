"use strict";var openHealthDataApp=angular.module("openHealthDataApp",["ngRoute","openHealthDataAppControllers","openHealthDataAppServices","ngAnimate","google-maps"]);openHealthDataApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/listView.html",controller:"restaurantListCtrl"}).when("/vendor/:id",{templateUrl:"partials/restaurantDetailView.html",controller:"restaurantDetailCtrl"}).otherwise({redirectTo:"/"})}]);var openHealthDataAppControllers=angular.module("openHealthDataAppControllers",[]);openHealthDataAppControllers.controller("restaurantListCtrl",["$scope","Vendors",function(a,b){a.restaurants=b.query(),a.map={center:{latitude:36.84701,longitude:-76.29243},zoom:17},a.showPosition=function(b){a.map.center.latitude=b.coords.latitude,a.map.center.longitude=b.coords.longitude},a.showError=function(){console.log("error")},a.getLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a.showPosition,a.showError):a.error="Geolocation is not supported by this browser."},a.getLocation(),a.toRad=function(a){return a*Math.PI/180},a.distanceCalculation=function(b){var c=b[0],d=b[1],e=a.map.center.latitude,f=a.map.center.longitude,g=6371,h=a.toRad(c-e),i=a.toRad(d-f);e=a.toRad(e),c=a.toRad(c);var j=Math.sin(h/2)*Math.sin(h/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(e)*Math.cos(c),k=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)),l=g*k;return.62137*l}}]),openHealthDataAppControllers.controller("restaurantDetailCtrl",["$scope","$routeParams","Vendor",function(a,b,c){a.restaurant=c.query({vendor_id:b.id}),a.map={center:{latitude:90.84701,longitude:90.29243},zoom:18}}]);var openHealthDataAppServices=angular.module("openHealthDataAppServices",["ngResource"]);openHealthDataAppServices.factory("Vendors",["$resource","$routeParams",function(a){return a("http://api.ttavenner.com/vendors/",{},{query:{method:"JSONP",params:{callback:"JSON_CALLBACK"}}})}]),openHealthDataAppServices.factory("Vendor",["$resource","$routeParams",function(a){return a("http://api.ttavenner.com/vendor/:vendor_id",{},{query:{method:"JSONP",params:{vendor_id:"/",callback:"JSON_CALLBACK"}}})}]);